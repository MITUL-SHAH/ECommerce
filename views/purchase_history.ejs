<!DOCTYPE html>
<html>
<head>
    <meta charset="ISO-8859-1">
    <title>Purchase History</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/dataTables.bootstrap5.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>

<body align="center">
<br> <br>
<h1 class="text-primary text-center mx-auto">Purchase History</h1>

<form action="#" method="post" name="login">

    <table class="table table-bordered">
        <thead>
        <tr class="table-primary">
            <th class="w-25 text-center">Item Name</th>
            <th class="w-25 text-center">Purchase Date</th>
            <th class="w-25 text-center">Quantity (qty)</th>
            <th class="w-25 text-center">Cost</th>
            <th class="w-25 text-center">Actions</th>
        </tr>
        </thead>
        <tbody id="dynamicTable">
        <!-- Table rows will be added here -->
        </tbody>
    </table>


</form>
<br> <br>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const dynamicTable = document.getElementById('dynamicTable');

        let rowCounter = 0;

        // Populate table rows from an array


        var order_details = <%- JSON.stringify(order)  %>;
        for (const itemData of order_details) {
            rowCounter++;
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                    <td class="w-25 text-center">
                        <label for="item${rowCounter}">${itemData.name}</label>
                    </td>
                    <td class="w-25 text-center">
                        <label for="item${rowCounter}">${itemData.purchase_date}</label>
                    </td>
                    <td class="w-25 text-center" >
                        <label for="item${rowCounter}">${itemData.quantity}</label>
                    </td>
                    <td class="w-25 text-center">
                        <label for="item${rowCounter}">${itemData.total_cost_of_item}</label>
                    </td>
                    <td class="w-25">
                        <button type="button" class="btn btn-danger btn-block" onclick="removeRow(this)">Return Item</button>
                    </td>
                `;
            dynamicTable.appendChild(newRow);
        }
    });



    function removeRow(button) {
        // Get the parent row and remove it
        const row = button.parentElement.parentElement;
        row.remove();
    }
</script>

</body>
</html>
